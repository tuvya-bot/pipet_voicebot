{"ast":null,"code":"import { buildOptions } from './OptionsBuilder.js';\nimport OrderedObjParser from './OrderedObjParser.js';\nimport prettify from './node2json.js';\nimport { validate } from \"../validator.js\";\nimport XmlNode from './xmlNode.js';\nexport default class XMLParser {\n  constructor(options) {\n    this.externalEntities = {};\n    this.options = buildOptions(options);\n  }\n  /**\n   * Parse XML dats to JS object \n   * @param {string|Buffer} xmlData \n   * @param {boolean|Object} validationOption \n   */\n  parse(xmlData, validationOption) {\n    if (typeof xmlData === \"string\") {} else if (xmlData.toString) {\n      xmlData = xmlData.toString();\n    } else {\n      throw new Error(\"XML data is accepted in String or Bytes[] form.\");\n    }\n    if (validationOption) {\n      if (validationOption === true) validationOption = {}; //validate with default options\n\n      const result = validate(xmlData, validationOption);\n      if (result !== true) {\n        throw Error(`${result.err.msg}:${result.err.line}:${result.err.col}`);\n      }\n    }\n    const orderedObjParser = new OrderedObjParser(this.options);\n    orderedObjParser.addExternalEntities(this.externalEntities);\n    const orderedResult = orderedObjParser.parseXml(xmlData);\n    if (this.options.preserveOrder || orderedResult === undefined) return orderedResult;else return prettify(orderedResult, this.options);\n  }\n\n  /**\n   * Add Entity which is not by default supported by this library\n   * @param {string} key \n   * @param {string} value \n   */\n  addEntity(key, value) {\n    if (value.indexOf(\"&\") !== -1) {\n      throw new Error(\"Entity value can't have '&'\");\n    } else if (key.indexOf(\"&\") !== -1 || key.indexOf(\";\") !== -1) {\n      throw new Error(\"An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'\");\n    } else if (value === \"&\") {\n      throw new Error(\"An entity with value '&' is not permitted\");\n    } else {\n      this.externalEntities[key] = value;\n    }\n  }\n\n  /**\n   * Returns a Symbol that can be used to access the metadata\n   * property on a node.\n   * \n   * If Symbol is not available in the environment, an ordinary property is used\n   * and the name of the property is here returned.\n   * \n   * The XMLMetaData property is only present when `captureMetaData`\n   * is true in the options.\n   */\n  static getMetaDataSymbol() {\n    return XmlNode.getMetaDataSymbol();\n  }\n}","map":{"version":3,"names":["buildOptions","OrderedObjParser","prettify","validate","XmlNode","XMLParser","constructor","options","externalEntities","parse","xmlData","validationOption","toString","Error","result","err","msg","line","col","orderedObjParser","addExternalEntities","orderedResult","parseXml","preserveOrder","undefined","addEntity","key","value","indexOf","getMetaDataSymbol"],"sources":["/Users/tuvyakhatter/Desktop/pipecat_voicebot/~/Desktop/sow_editor/node_modules/fast-xml-parser/src/xmlparser/XMLParser.js"],"sourcesContent":["import { buildOptions} from './OptionsBuilder.js';\nimport OrderedObjParser from './OrderedObjParser.js';\nimport prettify from './node2json.js';\nimport {validate} from \"../validator.js\";\nimport XmlNode from './xmlNode.js';\n\nexport default class XMLParser{\n    \n    constructor(options){\n        this.externalEntities = {};\n        this.options = buildOptions(options);\n        \n    }\n    /**\n     * Parse XML dats to JS object \n     * @param {string|Buffer} xmlData \n     * @param {boolean|Object} validationOption \n     */\n    parse(xmlData,validationOption){\n        if(typeof xmlData === \"string\"){\n        }else if( xmlData.toString){\n            xmlData = xmlData.toString();\n        }else{\n            throw new Error(\"XML data is accepted in String or Bytes[] form.\")\n        }\n        if( validationOption){\n            if(validationOption === true) validationOption = {}; //validate with default options\n            \n            const result = validate(xmlData, validationOption);\n            if (result !== true) {\n              throw Error( `${result.err.msg}:${result.err.line}:${result.err.col}` )\n            }\n          }\n        const orderedObjParser = new OrderedObjParser(this.options);\n        orderedObjParser.addExternalEntities(this.externalEntities);\n        const orderedResult = orderedObjParser.parseXml(xmlData);\n        if(this.options.preserveOrder || orderedResult === undefined) return orderedResult;\n        else return prettify(orderedResult, this.options);\n    }\n\n    /**\n     * Add Entity which is not by default supported by this library\n     * @param {string} key \n     * @param {string} value \n     */\n    addEntity(key, value){\n        if(value.indexOf(\"&\") !== -1){\n            throw new Error(\"Entity value can't have '&'\")\n        }else if(key.indexOf(\"&\") !== -1 || key.indexOf(\";\") !== -1){\n            throw new Error(\"An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'\")\n        }else if(value === \"&\"){\n            throw new Error(\"An entity with value '&' is not permitted\");\n        }else{\n            this.externalEntities[key] = value;\n        }\n    }\n\n    /**\n     * Returns a Symbol that can be used to access the metadata\n     * property on a node.\n     * \n     * If Symbol is not available in the environment, an ordinary property is used\n     * and the name of the property is here returned.\n     * \n     * The XMLMetaData property is only present when `captureMetaData`\n     * is true in the options.\n     */\n    static getMetaDataSymbol() {\n        return XmlNode.getMetaDataSymbol();\n    }\n}\n"],"mappings":"AAAA,SAASA,YAAY,QAAO,qBAAqB;AACjD,OAAOC,gBAAgB,MAAM,uBAAuB;AACpD,OAAOC,QAAQ,MAAM,gBAAgB;AACrC,SAAQC,QAAQ,QAAO,iBAAiB;AACxC,OAAOC,OAAO,MAAM,cAAc;AAElC,eAAe,MAAMC,SAAS;EAE1BC,WAAWA,CAACC,OAAO,EAAC;IAChB,IAAI,CAACC,gBAAgB,GAAG,CAAC,CAAC;IAC1B,IAAI,CAACD,OAAO,GAAGP,YAAY,CAACO,OAAO,CAAC;EAExC;EACA;AACJ;AACA;AACA;AACA;EACIE,KAAKA,CAACC,OAAO,EAACC,gBAAgB,EAAC;IAC3B,IAAG,OAAOD,OAAO,KAAK,QAAQ,EAAC,CAC/B,CAAC,MAAK,IAAIA,OAAO,CAACE,QAAQ,EAAC;MACvBF,OAAO,GAAGA,OAAO,CAACE,QAAQ,CAAC,CAAC;IAChC,CAAC,MAAI;MACD,MAAM,IAAIC,KAAK,CAAC,iDAAiD,CAAC;IACtE;IACA,IAAIF,gBAAgB,EAAC;MACjB,IAAGA,gBAAgB,KAAK,IAAI,EAAEA,gBAAgB,GAAG,CAAC,CAAC,CAAC,CAAC;;MAErD,MAAMG,MAAM,GAAGX,QAAQ,CAACO,OAAO,EAAEC,gBAAgB,CAAC;MAClD,IAAIG,MAAM,KAAK,IAAI,EAAE;QACnB,MAAMD,KAAK,CAAE,GAAGC,MAAM,CAACC,GAAG,CAACC,GAAG,IAAIF,MAAM,CAACC,GAAG,CAACE,IAAI,IAAIH,MAAM,CAACC,GAAG,CAACG,GAAG,EAAG,CAAC;MACzE;IACF;IACF,MAAMC,gBAAgB,GAAG,IAAIlB,gBAAgB,CAAC,IAAI,CAACM,OAAO,CAAC;IAC3DY,gBAAgB,CAACC,mBAAmB,CAAC,IAAI,CAACZ,gBAAgB,CAAC;IAC3D,MAAMa,aAAa,GAAGF,gBAAgB,CAACG,QAAQ,CAACZ,OAAO,CAAC;IACxD,IAAG,IAAI,CAACH,OAAO,CAACgB,aAAa,IAAIF,aAAa,KAAKG,SAAS,EAAE,OAAOH,aAAa,CAAC,KAC9E,OAAOnB,QAAQ,CAACmB,aAAa,EAAE,IAAI,CAACd,OAAO,CAAC;EACrD;;EAEA;AACJ;AACA;AACA;AACA;EACIkB,SAASA,CAACC,GAAG,EAAEC,KAAK,EAAC;IACjB,IAAGA,KAAK,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAC;MACzB,MAAM,IAAIf,KAAK,CAAC,6BAA6B,CAAC;IAClD,CAAC,MAAK,IAAGa,GAAG,CAACE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,IAAIF,GAAG,CAACE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAC;MACxD,MAAM,IAAIf,KAAK,CAAC,sEAAsE,CAAC;IAC3F,CAAC,MAAK,IAAGc,KAAK,KAAK,GAAG,EAAC;MACnB,MAAM,IAAId,KAAK,CAAC,2CAA2C,CAAC;IAChE,CAAC,MAAI;MACD,IAAI,CAACL,gBAAgB,CAACkB,GAAG,CAAC,GAAGC,KAAK;IACtC;EACJ;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAOE,iBAAiBA,CAAA,EAAG;IACvB,OAAOzB,OAAO,CAACyB,iBAAiB,CAAC,CAAC;EACtC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}