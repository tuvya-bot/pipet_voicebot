{"ast":null,"code":"import { HttpRequest } from \"@smithy/protocol-http\";\nexport const websocketEndpointMiddleware = (config, options) => next => args => {\n  const {\n    request\n  } = args;\n  if (HttpRequest.isInstance(request) && config.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes(\"websocket\")) {\n    request.protocol = \"wss:\";\n    request.method = \"GET\";\n    request.path = `${request.path}-websocket`;\n    const {\n      headers\n    } = request;\n    delete headers[\"content-type\"];\n    delete headers[\"x-amz-content-sha256\"];\n    for (const name of Object.keys(headers)) {\n      if (name.indexOf(options.headerPrefix) === 0) {\n        const chunkedName = name.replace(options.headerPrefix, \"\");\n        request.query[chunkedName] = headers[name];\n      }\n    }\n    if (headers[\"x-amz-user-agent\"]) {\n      request.query[\"user-agent\"] = headers[\"x-amz-user-agent\"];\n    }\n    request.headers = {\n      host: headers.host ?? request.hostname\n    };\n  }\n  return next(args);\n};\nexport const websocketEndpointMiddlewareOptions = {\n  name: \"websocketEndpointMiddleware\",\n  tags: [\"WEBSOCKET\", \"EVENT_STREAM\"],\n  relation: \"after\",\n  toMiddleware: \"eventStreamHeaderMiddleware\",\n  override: true\n};","map":{"version":3,"names":["HttpRequest","websocketEndpointMiddleware","config","options","next","args","request","isInstance","requestHandler","metadata","handlerProtocol","toLowerCase","includes","protocol","method","path","headers","name","Object","keys","indexOf","headerPrefix","chunkedName","replace","query","host","hostname","websocketEndpointMiddlewareOptions","tags","relation","toMiddleware","override"],"sources":["/Users/tuvyakhatter/Desktop/pipecat_voicebot/~/Desktop/sow_editor/node_modules/@aws-sdk/middleware-websocket/dist-es/middleware-websocket-endpoint.js"],"sourcesContent":["import { HttpRequest } from \"@smithy/protocol-http\";\nexport const websocketEndpointMiddleware = (config, options) => (next) => (args) => {\n    const { request } = args;\n    if (HttpRequest.isInstance(request) &&\n        config.requestHandler.metadata?.handlerProtocol?.toLowerCase().includes(\"websocket\")) {\n        request.protocol = \"wss:\";\n        request.method = \"GET\";\n        request.path = `${request.path}-websocket`;\n        const { headers } = request;\n        delete headers[\"content-type\"];\n        delete headers[\"x-amz-content-sha256\"];\n        for (const name of Object.keys(headers)) {\n            if (name.indexOf(options.headerPrefix) === 0) {\n                const chunkedName = name.replace(options.headerPrefix, \"\");\n                request.query[chunkedName] = headers[name];\n            }\n        }\n        if (headers[\"x-amz-user-agent\"]) {\n            request.query[\"user-agent\"] = headers[\"x-amz-user-agent\"];\n        }\n        request.headers = { host: headers.host ?? request.hostname };\n    }\n    return next(args);\n};\nexport const websocketEndpointMiddlewareOptions = {\n    name: \"websocketEndpointMiddleware\",\n    tags: [\"WEBSOCKET\", \"EVENT_STREAM\"],\n    relation: \"after\",\n    toMiddleware: \"eventStreamHeaderMiddleware\",\n    override: true,\n};\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,uBAAuB;AACnD,OAAO,MAAMC,2BAA2B,GAAGA,CAACC,MAAM,EAAEC,OAAO,KAAMC,IAAI,IAAMC,IAAI,IAAK;EAChF,MAAM;IAAEC;EAAQ,CAAC,GAAGD,IAAI;EACxB,IAAIL,WAAW,CAACO,UAAU,CAACD,OAAO,CAAC,IAC/BJ,MAAM,CAACM,cAAc,CAACC,QAAQ,EAAEC,eAAe,EAAEC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,WAAW,CAAC,EAAE;IACtFN,OAAO,CAACO,QAAQ,GAAG,MAAM;IACzBP,OAAO,CAACQ,MAAM,GAAG,KAAK;IACtBR,OAAO,CAACS,IAAI,GAAG,GAAGT,OAAO,CAACS,IAAI,YAAY;IAC1C,MAAM;MAAEC;IAAQ,CAAC,GAAGV,OAAO;IAC3B,OAAOU,OAAO,CAAC,cAAc,CAAC;IAC9B,OAAOA,OAAO,CAAC,sBAAsB,CAAC;IACtC,KAAK,MAAMC,IAAI,IAAIC,MAAM,CAACC,IAAI,CAACH,OAAO,CAAC,EAAE;MACrC,IAAIC,IAAI,CAACG,OAAO,CAACjB,OAAO,CAACkB,YAAY,CAAC,KAAK,CAAC,EAAE;QAC1C,MAAMC,WAAW,GAAGL,IAAI,CAACM,OAAO,CAACpB,OAAO,CAACkB,YAAY,EAAE,EAAE,CAAC;QAC1Df,OAAO,CAACkB,KAAK,CAACF,WAAW,CAAC,GAAGN,OAAO,CAACC,IAAI,CAAC;MAC9C;IACJ;IACA,IAAID,OAAO,CAAC,kBAAkB,CAAC,EAAE;MAC7BV,OAAO,CAACkB,KAAK,CAAC,YAAY,CAAC,GAAGR,OAAO,CAAC,kBAAkB,CAAC;IAC7D;IACAV,OAAO,CAACU,OAAO,GAAG;MAAES,IAAI,EAAET,OAAO,CAACS,IAAI,IAAInB,OAAO,CAACoB;IAAS,CAAC;EAChE;EACA,OAAOtB,IAAI,CAACC,IAAI,CAAC;AACrB,CAAC;AACD,OAAO,MAAMsB,kCAAkC,GAAG;EAC9CV,IAAI,EAAE,6BAA6B;EACnCW,IAAI,EAAE,CAAC,WAAW,EAAE,cAAc,CAAC;EACnCC,QAAQ,EAAE,OAAO;EACjBC,YAAY,EAAE,6BAA6B;EAC3CC,QAAQ,EAAE;AACd,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}