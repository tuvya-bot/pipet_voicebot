{"ast":null,"code":"import { isEmptyData, convertToBuffer } from \"@aws-crypto/util\";\nimport { EMPTY_DATA_SHA_256, SHA_256_HASH, SHA_256_HMAC_ALGO } from \"./constants\";\nimport { locateWindow } from \"@aws-sdk/util-locate-window\";\nvar Sha256 = /** @class */function () {\n  function Sha256(secret) {\n    this.toHash = new Uint8Array(0);\n    this.secret = secret;\n    this.reset();\n  }\n  Sha256.prototype.update = function (data) {\n    if (isEmptyData(data)) {\n      return;\n    }\n    var update = convertToBuffer(data);\n    var typedArray = new Uint8Array(this.toHash.byteLength + update.byteLength);\n    typedArray.set(this.toHash, 0);\n    typedArray.set(update, this.toHash.byteLength);\n    this.toHash = typedArray;\n  };\n  Sha256.prototype.digest = function () {\n    var _this = this;\n    if (this.key) {\n      return this.key.then(function (key) {\n        return locateWindow().crypto.subtle.sign(SHA_256_HMAC_ALGO, key, _this.toHash).then(function (data) {\n          return new Uint8Array(data);\n        });\n      });\n    }\n    if (isEmptyData(this.toHash)) {\n      return Promise.resolve(EMPTY_DATA_SHA_256);\n    }\n    return Promise.resolve().then(function () {\n      return locateWindow().crypto.subtle.digest(SHA_256_HASH, _this.toHash);\n    }).then(function (data) {\n      return Promise.resolve(new Uint8Array(data));\n    });\n  };\n  Sha256.prototype.reset = function () {\n    var _this = this;\n    this.toHash = new Uint8Array(0);\n    if (this.secret && this.secret !== void 0) {\n      this.key = new Promise(function (resolve, reject) {\n        locateWindow().crypto.subtle.importKey(\"raw\", convertToBuffer(_this.secret), SHA_256_HMAC_ALGO, false, [\"sign\"]).then(resolve, reject);\n      });\n      this.key.catch(function () {});\n    }\n  };\n  return Sha256;\n}();\nexport { Sha256 };","map":{"version":3,"names":["isEmptyData","convertToBuffer","EMPTY_DATA_SHA_256","SHA_256_HASH","SHA_256_HMAC_ALGO","locateWindow","Sha256","secret","toHash","Uint8Array","reset","prototype","update","data","typedArray","byteLength","set","digest","_this","key","then","crypto","subtle","sign","Promise","resolve","reject","importKey","catch"],"sources":["/Users/tuvyakhatter/Desktop/pipecat_voicebot/~/Desktop/sow_editor/node_modules/@aws-crypto/sha256-browser/src/webCryptoSha256.ts"],"sourcesContent":["import { Checksum, SourceData } from \"@aws-sdk/types\";\nimport { isEmptyData, convertToBuffer } from \"@aws-crypto/util\";\nimport {\n  EMPTY_DATA_SHA_256,\n  SHA_256_HASH,\n  SHA_256_HMAC_ALGO,\n} from \"./constants\";\nimport { locateWindow } from \"@aws-sdk/util-locate-window\";\n\nexport class Sha256 implements Checksum {\n  private readonly secret?: SourceData;\n  private key: Promise<CryptoKey> | undefined;\n  private toHash: Uint8Array = new Uint8Array(0);\n\n  constructor(secret?: SourceData) {\n    this.secret = secret;\n    this.reset();\n  }\n\n  update(data: SourceData): void {\n    if (isEmptyData(data)) {\n      return;\n    }\n\n    const update = convertToBuffer(data);\n    const typedArray = new Uint8Array(\n      this.toHash.byteLength + update.byteLength\n    );\n    typedArray.set(this.toHash, 0);\n    typedArray.set(update, this.toHash.byteLength);\n    this.toHash = typedArray;\n  }\n\n  digest(): Promise<Uint8Array> {\n    if (this.key) {\n      return this.key.then((key) =>\n        locateWindow()\n          .crypto.subtle.sign(SHA_256_HMAC_ALGO, key, this.toHash)\n          .then((data) => new Uint8Array(data))\n      );\n    }\n\n    if (isEmptyData(this.toHash)) {\n      return Promise.resolve(EMPTY_DATA_SHA_256);\n    }\n\n    return Promise.resolve()\n      .then(() =>\n        locateWindow().crypto.subtle.digest(SHA_256_HASH, this.toHash)\n      )\n      .then((data) => Promise.resolve(new Uint8Array(data)));\n  }\n\n  reset(): void {\n    this.toHash = new Uint8Array(0);\n    if (this.secret && this.secret !== void 0) {\n      this.key = new Promise((resolve, reject) => {\n        locateWindow()\n            .crypto.subtle.importKey(\n            \"raw\",\n            convertToBuffer(this.secret as SourceData),\n            SHA_256_HMAC_ALGO,\n            false,\n            [\"sign\"]\n        )\n            .then(resolve, reject);\n      });\n      this.key.catch(() => {});\n    }\n  }\n}\n"],"mappings":"AACA,SAASA,WAAW,EAAEC,eAAe,QAAQ,kBAAkB;AAC/D,SACEC,kBAAkB,EAClBC,YAAY,EACZC,iBAAiB,QACZ,aAAa;AACpB,SAASC,YAAY,QAAQ,6BAA6B;AAE1D,IAAAC,MAAA;EAKE,SAAAA,OAAYC,MAAmB;IAFvB,KAAAC,MAAM,GAAe,IAAIC,UAAU,CAAC,CAAC,CAAC;IAG5C,IAAI,CAACF,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACG,KAAK,EAAE;EACd;EAEAJ,MAAA,CAAAK,SAAA,CAAAC,MAAM,GAAN,UAAOC,IAAgB;IACrB,IAAIb,WAAW,CAACa,IAAI,CAAC,EAAE;MACrB;;IAGF,IAAMD,MAAM,GAAGX,eAAe,CAACY,IAAI,CAAC;IACpC,IAAMC,UAAU,GAAG,IAAIL,UAAU,CAC/B,IAAI,CAACD,MAAM,CAACO,UAAU,GAAGH,MAAM,CAACG,UAAU,CAC3C;IACDD,UAAU,CAACE,GAAG,CAAC,IAAI,CAACR,MAAM,EAAE,CAAC,CAAC;IAC9BM,UAAU,CAACE,GAAG,CAACJ,MAAM,EAAE,IAAI,CAACJ,MAAM,CAACO,UAAU,CAAC;IAC9C,IAAI,CAACP,MAAM,GAAGM,UAAU;EAC1B,CAAC;EAEDR,MAAA,CAAAK,SAAA,CAAAM,MAAM,GAAN;IAAA,IAAAC,KAAA;IACE,IAAI,IAAI,CAACC,GAAG,EAAE;MACZ,OAAO,IAAI,CAACA,GAAG,CAACC,IAAI,CAAC,UAACD,GAAG;QACvB,OAAAd,YAAY,EAAE,CACXgB,MAAM,CAACC,MAAM,CAACC,IAAI,CAACnB,iBAAiB,EAAEe,GAAG,EAAED,KAAI,CAACV,MAAM,CAAC,CACvDY,IAAI,CAAC,UAACP,IAAI;UAAK,WAAIJ,UAAU,CAACI,IAAI,CAAC;QAApB,CAAoB,CAAC;MAFvC,CAEuC,CACxC;;IAGH,IAAIb,WAAW,CAAC,IAAI,CAACQ,MAAM,CAAC,EAAE;MAC5B,OAAOgB,OAAO,CAACC,OAAO,CAACvB,kBAAkB,CAAC;;IAG5C,OAAOsB,OAAO,CAACC,OAAO,EAAE,CACrBL,IAAI,CAAC;MACJ,OAAAf,YAAY,EAAE,CAACgB,MAAM,CAACC,MAAM,CAACL,MAAM,CAACd,YAAY,EAAEe,KAAI,CAACV,MAAM,CAAC;IAA9D,CAA8D,CAC/D,CACAY,IAAI,CAAC,UAACP,IAAI;MAAK,OAAAW,OAAO,CAACC,OAAO,CAAC,IAAIhB,UAAU,CAACI,IAAI,CAAC,CAAC;IAArC,CAAqC,CAAC;EAC1D,CAAC;EAEDP,MAAA,CAAAK,SAAA,CAAAD,KAAK,GAAL;IAAA,IAAAQ,KAAA;IACE,IAAI,CAACV,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC,CAAC;IAC/B,IAAI,IAAI,CAACF,MAAM,IAAI,IAAI,CAACA,MAAM,KAAK,KAAK,CAAC,EAAE;MACzC,IAAI,CAACY,GAAG,GAAG,IAAIK,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM;QACrCrB,YAAY,EAAE,CACTgB,MAAM,CAACC,MAAM,CAACK,SAAS,CACxB,KAAK,EACL1B,eAAe,CAACiB,KAAI,CAACX,MAAoB,CAAC,EAC1CH,iBAAiB,EACjB,KAAK,EACL,CAAC,MAAM,CAAC,CACX,CACIgB,IAAI,CAACK,OAAO,EAAEC,MAAM,CAAC;MAC5B,CAAC,CAAC;MACF,IAAI,CAACP,GAAG,CAACS,KAAK,CAAC,aAAO,CAAC,CAAC;;EAE5B,CAAC;EACH,OAAAtB,MAAC;AAAD,CAAC,CA7DD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}