{"ast":null,"code":"import { HttpRequest } from \"@smithy/protocol-http\";\nimport { isWebSocketRequest } from \"./utils\";\nexport class WebsocketSignatureV4 {\n  signer;\n  constructor(options) {\n    this.signer = options.signer;\n  }\n  presign(originalRequest, options = {}) {\n    return this.signer.presign(originalRequest, options);\n  }\n  async sign(toSign, options) {\n    if (HttpRequest.isInstance(toSign) && isWebSocketRequest(toSign)) {\n      const signedRequest = await this.signer.presign({\n        ...toSign,\n        body: \"\"\n      }, {\n        ...options,\n        expiresIn: 60,\n        unsignableHeaders: new Set(Object.keys(toSign.headers).filter(header => header !== \"host\"))\n      });\n      return {\n        ...signedRequest,\n        body: toSign.body\n      };\n    } else {\n      return this.signer.sign(toSign, options);\n    }\n  }\n}","map":{"version":3,"names":["HttpRequest","isWebSocketRequest","WebsocketSignatureV4","signer","constructor","options","presign","originalRequest","sign","toSign","isInstance","signedRequest","body","expiresIn","unsignableHeaders","Set","Object","keys","headers","filter","header"],"sources":["/Users/tuvyakhatter/Desktop/pipecat_voicebot/~/Desktop/sow_editor/node_modules/@aws-sdk/middleware-websocket/dist-es/WebsocketSignatureV4.js"],"sourcesContent":["import { HttpRequest } from \"@smithy/protocol-http\";\nimport { isWebSocketRequest } from \"./utils\";\nexport class WebsocketSignatureV4 {\n    signer;\n    constructor(options) {\n        this.signer = options.signer;\n    }\n    presign(originalRequest, options = {}) {\n        return this.signer.presign(originalRequest, options);\n    }\n    async sign(toSign, options) {\n        if (HttpRequest.isInstance(toSign) && isWebSocketRequest(toSign)) {\n            const signedRequest = await this.signer.presign({ ...toSign, body: \"\" }, {\n                ...options,\n                expiresIn: 60,\n                unsignableHeaders: new Set(Object.keys(toSign.headers).filter((header) => header !== \"host\")),\n            });\n            return {\n                ...signedRequest,\n                body: toSign.body,\n            };\n        }\n        else {\n            return this.signer.sign(toSign, options);\n        }\n    }\n}\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,uBAAuB;AACnD,SAASC,kBAAkB,QAAQ,SAAS;AAC5C,OAAO,MAAMC,oBAAoB,CAAC;EAC9BC,MAAM;EACNC,WAAWA,CAACC,OAAO,EAAE;IACjB,IAAI,CAACF,MAAM,GAAGE,OAAO,CAACF,MAAM;EAChC;EACAG,OAAOA,CAACC,eAAe,EAAEF,OAAO,GAAG,CAAC,CAAC,EAAE;IACnC,OAAO,IAAI,CAACF,MAAM,CAACG,OAAO,CAACC,eAAe,EAAEF,OAAO,CAAC;EACxD;EACA,MAAMG,IAAIA,CAACC,MAAM,EAAEJ,OAAO,EAAE;IACxB,IAAIL,WAAW,CAACU,UAAU,CAACD,MAAM,CAAC,IAAIR,kBAAkB,CAACQ,MAAM,CAAC,EAAE;MAC9D,MAAME,aAAa,GAAG,MAAM,IAAI,CAACR,MAAM,CAACG,OAAO,CAAC;QAAE,GAAGG,MAAM;QAAEG,IAAI,EAAE;MAAG,CAAC,EAAE;QACrE,GAAGP,OAAO;QACVQ,SAAS,EAAE,EAAE;QACbC,iBAAiB,EAAE,IAAIC,GAAG,CAACC,MAAM,CAACC,IAAI,CAACR,MAAM,CAACS,OAAO,CAAC,CAACC,MAAM,CAAEC,MAAM,IAAKA,MAAM,KAAK,MAAM,CAAC;MAChG,CAAC,CAAC;MACF,OAAO;QACH,GAAGT,aAAa;QAChBC,IAAI,EAAEH,MAAM,CAACG;MACjB,CAAC;IACL,CAAC,MACI;MACD,OAAO,IAAI,CAACT,MAAM,CAACK,IAAI,CAACC,MAAM,EAAEJ,OAAO,CAAC;IAC5C;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}