{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\nvar subtleCryptoMethods = [\"decrypt\", \"digest\", \"encrypt\", \"exportKey\", \"generateKey\", \"importKey\", \"sign\", \"verify\"];\nexport function supportsWebCrypto(window) {\n  if (supportsSecureRandom(window) && typeof window.crypto.subtle === \"object\") {\n    var subtle = window.crypto.subtle;\n    return supportsSubtleCrypto(subtle);\n  }\n  return false;\n}\nexport function supportsSecureRandom(window) {\n  if (typeof window === \"object\" && typeof window.crypto === \"object\") {\n    var getRandomValues = window.crypto.getRandomValues;\n    return typeof getRandomValues === \"function\";\n  }\n  return false;\n}\nexport function supportsSubtleCrypto(subtle) {\n  return subtle && subtleCryptoMethods.every(function (methodName) {\n    return typeof subtle[methodName] === \"function\";\n  });\n}\nexport function supportsZeroByteGCM(subtle) {\n  return __awaiter(this, void 0, void 0, function () {\n    var key, zeroByteAuthTag, _a;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          if (!supportsSubtleCrypto(subtle)) return [2 /*return*/, false];\n          _b.label = 1;\n        case 1:\n          _b.trys.push([1, 4,, 5]);\n          return [4 /*yield*/, subtle.generateKey({\n            name: \"AES-GCM\",\n            length: 128\n          }, false, [\"encrypt\"])];\n        case 2:\n          key = _b.sent();\n          return [4 /*yield*/, subtle.encrypt({\n            name: \"AES-GCM\",\n            iv: new Uint8Array(Array(12)),\n            additionalData: new Uint8Array(Array(16)),\n            tagLength: 128\n          }, key, new Uint8Array(0))];\n        case 3:\n          zeroByteAuthTag = _b.sent();\n          return [2 /*return*/, zeroByteAuthTag.byteLength === 16];\n        case 4:\n          _a = _b.sent();\n          return [2 /*return*/, false];\n        case 5:\n          return [2 /*return*/];\n      }\n    });\n  });\n}","map":{"version":3,"names":["subtleCryptoMethods","supportsWebCrypto","window","supportsSecureRandom","crypto","subtle","supportsSubtleCrypto","getRandomValues","every","methodName","supportsZeroByteGCM","generateKey","name","length","key","_b","sent","encrypt","iv","Uint8Array","Array","additionalData","tagLength","zeroByteAuthTag","byteLength"],"sources":["/Users/tuvyakhatter/Desktop/pipecat_voicebot/~/Desktop/sow_editor/node_modules/@aws-crypto/supports-web-crypto/src/supportsWebCrypto.ts"],"sourcesContent":["type SubtleCryptoMethod =\n  | \"decrypt\"\n  | \"digest\"\n  | \"encrypt\"\n  | \"exportKey\"\n  | \"generateKey\"\n  | \"importKey\"\n  | \"sign\"\n  | \"verify\";\n\nconst subtleCryptoMethods: Array<SubtleCryptoMethod> = [\n  \"decrypt\",\n  \"digest\",\n  \"encrypt\",\n  \"exportKey\",\n  \"generateKey\",\n  \"importKey\",\n  \"sign\",\n  \"verify\"\n];\n\nexport function supportsWebCrypto(window: Window): boolean {\n  if (\n    supportsSecureRandom(window) &&\n    typeof window.crypto.subtle === \"object\"\n  ) {\n    const { subtle } = window.crypto;\n\n    return supportsSubtleCrypto(subtle);\n  }\n\n  return false;\n}\n\nexport function supportsSecureRandom(window: Window): boolean {\n  if (typeof window === \"object\" && typeof window.crypto === \"object\") {\n    const { getRandomValues } = window.crypto;\n\n    return typeof getRandomValues === \"function\";\n  }\n\n  return false;\n}\n\nexport function supportsSubtleCrypto(subtle: SubtleCrypto) {\n  return (\n    subtle &&\n    subtleCryptoMethods.every(\n      methodName => typeof subtle[methodName] === \"function\"\n    )\n  );\n}\n\nexport async function supportsZeroByteGCM(subtle: SubtleCrypto) {\n  if (!supportsSubtleCrypto(subtle)) return false;\n  try {\n    const key = await subtle.generateKey(\n      { name: \"AES-GCM\", length: 128 },\n      false,\n      [\"encrypt\"]\n    );\n    const zeroByteAuthTag = await subtle.encrypt(\n      {\n        name: \"AES-GCM\",\n        iv: new Uint8Array(Array(12)),\n        additionalData: new Uint8Array(Array(16)),\n        tagLength: 128\n      },\n      key,\n      new Uint8Array(0)\n    );\n    return zeroByteAuthTag.byteLength === 16;\n  } catch {\n    return false;\n  }\n}\n"],"mappings":";AAUA,IAAMA,mBAAmB,GAA8B,CACrD,SAAS,EACT,QAAQ,EACR,SAAS,EACT,WAAW,EACX,aAAa,EACb,WAAW,EACX,MAAM,EACN,QAAQ,CACT;AAED,OAAM,SAAUC,iBAAiBA,CAACC,MAAc;EAC9C,IACEC,oBAAoB,CAACD,MAAM,CAAC,IAC5B,OAAOA,MAAM,CAACE,MAAM,CAACC,MAAM,KAAK,QAAQ,EACxC;IACQ,IAAAA,MAAM,GAAKH,MAAM,CAACE,MAAM,CAAAC,MAAlB;IAEd,OAAOC,oBAAoB,CAACD,MAAM,CAAC;;EAGrC,OAAO,KAAK;AACd;AAEA,OAAM,SAAUF,oBAAoBA,CAACD,MAAc;EACjD,IAAI,OAAOA,MAAM,KAAK,QAAQ,IAAI,OAAOA,MAAM,CAACE,MAAM,KAAK,QAAQ,EAAE;IAC3D,IAAAG,eAAe,GAAKL,MAAM,CAACE,MAAM,CAAAG,eAAlB;IAEvB,OAAO,OAAOA,eAAe,KAAK,UAAU;;EAG9C,OAAO,KAAK;AACd;AAEA,OAAM,SAAUD,oBAAoBA,CAACD,MAAoB;EACvD,OACEA,MAAM,IACNL,mBAAmB,CAACQ,KAAK,CACvB,UAAAC,UAAU;IAAI,cAAOJ,MAAM,CAACI,UAAU,CAAC,KAAK,UAAU;EAAxC,CAAwC,CACvD;AAEL;AAEA,OAAM,SAAgBC,mBAAmBA,CAACL,MAAoB;;;;;;UAC5D,IAAI,CAACC,oBAAoB,CAACD,MAAM,CAAC,EAAE,sBAAO,KAAK;;;;UAEjC,qBAAMA,MAAM,CAACM,WAAW,CAClC;YAAEC,IAAI,EAAE,SAAS;YAAEC,MAAM,EAAE;UAAG,CAAE,EAChC,KAAK,EACL,CAAC,SAAS,CAAC,CACZ;;UAJKC,GAAG,GAAGC,EAAA,CAAAC,IAAA,EAIX;UACuB,qBAAMX,MAAM,CAACY,OAAO,CAC1C;YACEL,IAAI,EAAE,SAAS;YACfM,EAAE,EAAE,IAAIC,UAAU,CAACC,KAAK,CAAC,EAAE,CAAC,CAAC;YAC7BC,cAAc,EAAE,IAAIF,UAAU,CAACC,KAAK,CAAC,EAAE,CAAC,CAAC;YACzCE,SAAS,EAAE;WACZ,EACDR,GAAG,EACH,IAAIK,UAAU,CAAC,CAAC,CAAC,CAClB;;UATKI,eAAe,GAAGR,EAAA,CAAAC,IAAA,EASvB;UACD,sBAAOO,eAAe,CAACC,UAAU,KAAK,EAAE;;;UAExC,sBAAO,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}